.print-day-overview-wrap
  .print-day-log-wrap
    .print-day-log.title
      = "Day #{day.place_in_trip + 1}"
      - if @plan.starts_at
        = ": #{display_date(@plan, day.items.first).strftime('%b %d, %Y')}"
    - if index != 0
      .print-day-log.item
        = "(0) "
        - if day.previous_lodging
          %b= day.previous_lodging
        - else
          %b= day.previous.items.last.name
        = "(End Yesterday)"
    - day.items.each_with_index do |item, item_index|
      .print-day-log.item
        = "(#{item_index + 1}) "
        - if item.name         
          %b= item.name.titleize
        - else
          %i= "Un-named"
        - if item_index == 0
          - dist = distance_to_yesterday_last_item_or_lodging(day)
          - if dist.present?
            = "(#{dist} miles)"
        - else
          - dist = distance_to_previous_item(item)
          - if dist.present?
            = "(#{dist} miles)"

  .content-tab-print.day-map
    .empty-print-map-box.day
      %map.print-map-canvas.day{ coordinates: day.coordinates_including_prior_days_lodging, type: 'print' }

- day.items.in_groups_of(4, 'open') do |items_in_four|

  .print-tab-row

    - colspan_open = 0

    - items_in_four.each_with_index do |item, index|

      - if index == 3 && item != 'open'
        .print-tab-wrap.last
          = render partial: 'days/print_tab', locals: { day: day, item: item }
      - elsif item != 'open'
        .print-tab-wrap
          = render partial: 'days/print_tab', locals: { day: day, item: item }
      - else
        - colspan_open = colspan_open + 1

    - colspan_open = ((colspan_open*180)+((colspan_open-1)*10))
    - if colspan_open != -10
      .fill-open{ style: "width: #{colspan_open}px", width: "#{colspan_open}px" }
